<h2>Detalle del Carrito</h2>

{{#if cart}}
    <div class="cart-details-container">
        <h3>ID del Carrito: {{cart._id}}</h3>
        {{#if cart.products.length}}
            <div class="cart-products-grid">
                {{#each cart.products}}
                    <div class="cart-product-card">
                        {{#if product.thumbnail}}
                            <img src="{{product.thumbnail}}" alt="{{product.title}}" class="product-thumbnail">
                        {{else}}
                            <img src="/img/default-product.png" alt="Producto sin imagen" class="product-thumbnail">
                        {{/if}}
                        <h4>{{product.title}}</h4>
                        <p>Precio Unitario: ${{product.price}}</p>
                        <p>Cantidad: {{quantity}}</p>
                        <p>Subtotal: ${{multiply product.price quantity}}</p>
                        <!-- Botón para eliminar un producto del carrito -->
                        <button class="remove-from-cart-btn" data-cart-id="{{../cart._id}}" data-product-id="{{product._id}}">Eliminar</button>
                    </div>
                {{/each}}
            </div>
            <div class="cart-summary">
                <h4>Total del Carrito: $<span id="cart-total">{{calculateCartTotal cart.products}}</span></h4>
                <button id="complete-purchase-btn" data-cart-id="{{cart._id}}">Completar Compra</button>
                <button id="clear-cart-btn" data-cart-id="{{cart._id}}">Vaciar Carrito</button>
            </div>
        {{else}}
            <p>Tu carrito está vacío.</p>
        {{/if}}
    </div>
{{else}}
    <p>No se pudo cargar el carrito o no tienes uno asociado.</p>
    <p><a href="/products">Ver Productos</a></p>
{{/if}}

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/cart.js"></script>

